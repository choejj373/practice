<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="/socket.io/socket.io.js"></script>
    <title>Document</title>
</head>

<body>
<h1> Message</h1>

<!-- <div id = "chatContent"> -->
<!-- </div> -->

<ul id = "chatContent">
			
</ul>
<br>

<input id = "myChat" type="text">
<input id="send" type="button"  value="Send">

<a href="/logout">logout</a>
</body>

<script>
    var socket = io.connect("http://localhost:3000",{
         path: "/socket.io"
     });

	const sendBtn = document.querySelector("#send");
	const msgLine = document.querySelector("#myChat");	
	const chatBox = document.querySelector("#chatContent");

	function send(){
		console.log( msgLine );
		console.log("Send : " + msgLine.value);
		socket.emit("msg", `${msgLine.value}`);
		msgLine.value = "";
	};

	sendBtn.addEventListener("click", send );

	socket.on('msg', function (data) {
		console.log( "received msg: " + data );

		const messagesList = document.querySelector('#chatContent');
		const messageItem = document.createElement('li');

		messageItem.textContent = data;
		messagesList.appendChild(messageItem);		
	});

</script>
<style>
	* {
		box-sizing: border-box;
	}
	.msgLine {
		margin: 15px;
	}
	.msgBox {
		border: 1px solid black;
		background: black;
		padding: 2px 5px;
		border-radius: 10px;
	}
	#chatContent {
		border: 1px solid #000;
		width: 100%;
		height: 200px;
		margin-bottom: 10px;
		overflow-y: auto;
	}
	#myChat {
		width: 100%;
	}
	#msg, #myChat {
		width: 80%;
		height: 32px;
		border-radius: 8px;
	}
	#send {
		width: 16%;
		height: 34px;
		border-radius: 50px;
		background: black;
		color: white;
	}
</style>

